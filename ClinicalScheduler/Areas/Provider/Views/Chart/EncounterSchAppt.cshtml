@model Scheduler.Models.ViewModels.EncounterVM;
@using Microsoft.AspNetCore.Identity
@inject UserManager<IdentityUser> UserManager

<div>
   <partial name="_EncounterDetails" model="Model"/>
</div>
<div class="mt-3">
    <label class="row-md-2 control-label" id="currentUser" hidden>@UserManager.GetUserId(User)</label>
    <h4 class="primary">Clinical Summarry</h4>
    <hr />
    <div class="p-3 border">
        <button id="patientDx" class="btn btn-info">Show Complete Diagnosis</button>
        <button id="prescriptions" class="btn btn-success">Show Prescriptions</button>
        <button id="patientallergies" class="btn btn-danger">Show Allergies</button>
        <button id="last_doc" class="btn btn-warning">Show Last Note</button>
    </div>
</div>

<div class="container mt-4 row" id="hidden_dx">
   <div class="row pb-2">
            <h4 class="text-primary">Complete diagnosis</h4>
            <hr/>
   </div>
    <table id ="tblPatientDiagnosisData" class="display compact" style="width:100%">
        <thead>
            <tr>
                <th></th>
                <th>Diagnosis ID</th>
                <th>Diagnosis Code</th>
                <th>Active Dt/Tm</th>
                <th>Active</th>
            </tr>
        </thead>
    
    </table>
</div>

<div class="container mt-4 row" id="hidden_pres">
   <div class="row pb-2">
            <h4 class="text-primary">Prescriptions</h4>
            <hr/>
   </div>
    <table id ="tblPatientPrescriptions" class="display compact" style="width:100%">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Order Type</th>
                <th>Order Dt/Tm</th>
                <th>Order Name</th>
                <th>Order Details</th>
                <th>Ordered by</th>
                <th>Order Status</th>
                <th>Active</th>
            </tr>
        </thead>
    </table>
</div>

<div class="container mt-4 row" id="hidden_allergies">
   <div class="row pb-2">
            <h4 class="text-primary">Allergies</h4>
            <hr/>
   </div>
    <table id ="tblPatientAllergyData" class="display compact" style="width:100%">
        <thead>
            <tr>
                <th>Allergy ID</th>
                <th>Allergies </th>
                <th>Provider </th>
                <th>Active Dt/Tm</th>
                <th>End Dt/Tm</th>
                <th>Active</th>
            </tr>
        </thead>
    </table>
</div>

<div class="pt-3 mt-4 row" id="hidden_lastdoc">
        <div class="row pb-2">
            <h4 class="text-primary">Your Last Documentation</h4>
            <hr/>
        </div>
        <div class="mb-12">
            <label asp-for="LastDocument.Title">Title</label>
            <input asp-for="LastDocument.Title" class="form-control"/>
        </div>
         <div class="mb-3 col-6">
            <label asp-for="LastDocument.DocType.Name">Document Type</label>
            <input asp-for="LastDocument.DocType.Name" class="form-control"/>
        </div>
         <div class="mb-3 col-6">
            <label asp-for="LastDocument.DocStatus.Name">Document Status</label>
            <input asp-for="LastDocument.DocStatus.Name" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.Age">Age (yrs.)</label>
            <input asp-for="LastDocument.Age" id="age" class="form-control" readonly/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.HeightFt">Height Ft.(')</label>
            <input asp-for="LastDocument.HeightFt" id="heightFt" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.HeightIn">In.(")</label>
            <input asp-for="LastDocument.HeightIn" id="heightIn" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.Weight">Weight(lbs.)</label>
            <input asp-for="LastDocument.Weight" id="weight" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.BMI">BMI Score</label>
            <input asp-for="LastDocument.BMI" id="bmi" class="form-control" readonly/>
        </div>
        <div class="mb-3 col-1">
            <label>BMI Result</label>
            <label id="bmiresult"></label>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.Systolic">Systolic</label>
            <input asp-for="LastDocument.Systolic" id="systolic" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.Diastolic">Diastolic</label>
            <input asp-for="LastDocument.Diastolic" id="diastolic" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.PulseRate">Pulse Rate</label>
            <input asp-for="LastDocument.PulseRate" id="pulse" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.OxygenSaturation">O2 Sat.%</label>
            <input asp-for="LastDocument.OxygenSaturation" id="O2" class="form-control"/>
        </div>
        <div class="mb-3 col-1">
            <label asp-for="LastDocument.Temperature">Temp. (F)</label>
            <input asp-for="LastDocument.Temperature" id="temp" class="form-control"/>
        </div>
        <div class="mb-3 col-2">
            <label asp-for="LastDocument.PainScale">Pain Scale</label>
            <input asp-for="LastDocument.PainScale" class="form-control"/>
        </div>
        <div class="mb-3 col-10">
            <label asp-for="LastDocument.PainLocation">Pain Location</label>
            <input asp-for="LastDocument.PainLocation" class="form-control"/>
        </div>
         <div class="mb-3">
            <label asp-for="LastDocument.Narrative">Narrative</label>
            <textarea asp-for="LastDocument.Narrative" rows="10" class="form-control"></textarea>
        </div>
</div>

<div class="container p-3">
    <div class="row pt-4">
        <div class="col-12">
            <h4 class="primary">Medical Record Documentation</h4>
                <hr />
        </div>
    </div>     

    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#diagnosis">Diagnosis|Problems </a>
      </li>  
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#note">Notes</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#order">Orders</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#allergy">Allergies</a>
      </li>
    </ul>

    <div id="myTabContent" class="tab-content">

        <div class="tab-pane fade active show" id="diagnosis">
            <div class="container bg-white border">
                <div class="row">
                    <div class="col-6 bg-white text-start mb-2 mt-2">
                        <button id="btn-show-all-children" type="button" class="btn btn-primary">
                            <i class="bi bi-arrows-expand"></i> Expand All</button>
                        <button id="btn-hide-all-children" type="button" class="btn btn-primary"> 
                            <i class="bi bi-arrows-collapse"></i> Collapse All</button>
                    </div>
                    <div class="col-6 bg-white text-end mb-2 mt-2">
                        <a asp-area="Provider" asp-controller ="Diagnosis" asp-action="Upsert" asp-route-encntrId="@Model.Encounter.Id" class="btn btn-primary">
                            <i class="bi bi-plus-circle"></i> &nbsp; New Diagnosis
                        </a> 
                    </div>
                </div>
                     <table id ="tblEnctrDiagnosisData" class="display compact" style="width:100%">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Diagnosis ID</th>
                                <th>Diagnosis Code</th>
                                <th>Active Dt/Tm</th>
                                <th>Active</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                    </table>
           </div> 
        </div>   
        
         <div class="tab-pane fade" id="note" >
             <div class="container bg-white border">
                <div class="col-12 bg-white text-end mb-2 mt-2">
                    <a asp-area="Provider" asp-controller ="Document" asp-action="Upsert" asp-route-encntrId="@Model.Encounter.Id" class="btn btn-primary">
                        <i class="bi bi-plus-circle"></i> &nbsp; New Note
                    </a> 
                </div>
                  <table id ="tblDocumentData" class="display compact" style="width:100%">
                        <thead>
                            <tr>
                                <th>Documentation ID</th>
                                <th>Creation Dt/Tm</th>
                                <th>Provider</th>
                                <th>Note Title</th>
                                <th>Document Type</th>
                                <th>Status</th>
                                <th>InError</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                    </table>  
            </div>
        </div>

         <div class="tab-pane fade" id="order" >
             <div class="container bg-white border">
                 <div class="col-12 bg-white text-end mb-2 mt-2">
                    <a asp-area="Provider" asp-controller ="Order" asp-action="Upsert" asp-route-encntrId="@Model.Encounter.Id" class="btn btn-primary">
                        <i class="bi bi-plus-circle"></i> &nbsp; New Order
                    </a> 
                 </div>
                   <table id ="tblOrderData" class="display compact" style="width:100%">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Order Type</th>
                                <th>Order Dt/Tm</th>
                                <th>Order Name</th>
                                <th>Order Details</th>
                                <th>Ordered by</th>
                                <th>Order Status</th>
                                <th>Active</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                    </table>
            </div>
         </div>

         <div class="tab-pane fade" id="allergy" >
                <div class="container bg-white border">
                 <div class="col-12 bg-white text-end mb-2 mt-2">
                    <a asp-area="Provider" asp-controller ="Allergy" asp-action="Upsert" asp-route-encntrId="@Model.Encounter.Id" class="btn btn-primary">
                        <i class="bi bi-plus-circle"></i> &nbsp; New Allergy
                    </a> 
                 </div>
                   <table id ="tblAllergyData" class="display compact" style="width:100%">
                        <thead>
                            <tr>
                                <th>Allergy ID</th>
                                <th>Allergies </th>
                                <th>Provider </th>
                                <th>Active Dt/Tm</th>
                                <th>End Dt/Tm</th>
                                <th>Active</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>

   </div>   
</div>
@section Scripts{
    <script src="~/js/EncounterDetails.js"></script>
    <script src="~/js/ClinicalParam.js"></script>
    <script src="~/js/DisableFields.js"></script>
}